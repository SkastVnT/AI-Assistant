================================================================================
  HÆ¯á»šNG DáºªN SETUP Láº I Dá»° ÃN TRÃŠN THIáº¾T Bá»Š Má»šI
================================================================================

ğŸ“… Last Updated: 2025-10-28
ğŸ”§ Python Version: 3.10
ğŸŒ Repository: https://github.com/SkastVnT/AI-Assistant.git

================================================================================
  1. CLONE PROJECT
================================================================================

git clone https://github.com/SkastVnT/AI-Assistant.git
cd AI-Assistant

# Chuyá»ƒn sang branch phÃ¡t triá»ƒn (náº¿u cáº§n)
git checkout ChatBotCoding

================================================================================
  2. CÃ€I Äáº¶T DEPENDENCIES
================================================================================

--- ChatBot Service ---
cd ChatBot
pip install Flask==3.0.0
pip install openai
pip install google-generativeai==0.8.5

--- Speech2Text Service (Quan trá»ng: version cá»‘ Ä‘á»‹nh!) ---
cd "Speech2Text Services"
pip install torch==2.0.1
pip install torchaudio==2.0.2
pip install pytorch-lightning==2.0.0
pip install "numpy<2.0"
pip install pyannote.audio
pip install ffmpeg-python
pip install faster-whisper

--- Text2SQL Service ---
cd "Text2SQL Services"
pip install -r requirements.txt

--- Hub Gateway ---
cd "Hub Gateway"
pip install Flask==3.0.0
pip install requests

================================================================================
  3. Táº O FILE .env (ROOT FOLDER)
================================================================================

Táº¡o file .env á»Ÿ thÆ° má»¥c gá»‘c (d:\WORK\AI assistant\.env):

# Hub Gateway Configuration
HUB_PORT=3000
FLASK_ENV=development
FLASK_SECRET_KEY=ai-assistant-hub-2025-thanhnguyen-secure-key-change-in-production

# Service Ports
CHATBOT_PORT=5000
SPEECH2TEXT_PORT=5001
TEXT2SQL_PORT=5002

# OpenAI API (GPT-4o-mini: $0.15/$0.60 per 1M tokens)
OPENAI_API_KEY=sk-proj-SZNV...YOUR_KEY_HERE...

# DeepSeek API (DeepSeek: $0.14/$0.28 per 1M tokens)
DEEPSEEK_API_KEY=sk-1f010...YOUR_KEY_HERE...

# Gemini API (FREE tier with gemini-2.0-flash)
GEMINI_API_KEY_1=AIzaSyB0h_O7...YOUR_KEY_HERE...
GEMINI_API_KEY_2=AIzaSyCba...YOUR_KEY_HERE...

# HuggingFace (for Speech2Text models)
HUGGINGFACE_TOKEN=hf_...YOUR_TOKEN_HERE...

# Optional: Google Search API (chÆ°a dÃ¹ng)
GOOGLE_SEARCH_API_KEY=your_key_here
GOOGLE_CSE_ID=your_cse_id_here

# Optional: GitHub API (chÆ°a dÃ¹ng)
GITHUB_TOKEN=ghp_your_token_here

================================================================================
  4. Táº O FILE .env CHO CHATBOT
================================================================================

Táº¡o file ChatBot/.env:

OPENAI_API_KEY=sk-proj-SZNV...YOUR_KEY_HERE...
DEEPSEEK_API_KEY=sk-1f010...YOUR_KEY_HERE...
GEMINI_API_KEY_1=AIzaSyB0h_O7...YOUR_KEY_HERE...
GEMINI_API_KEY_2=AIzaSyCba...YOUR_KEY_HERE...

================================================================================
  5. KHá»I Äá»˜NG CÃC SERVICE
================================================================================

--- Terminal 1: Hub Gateway ---
cd "Hub Gateway"
python src/hub.py
# Running on: http://127.0.0.1:3000

--- Terminal 2: ChatBot ---
cd ChatBot
python app.py
# Running on: http://127.0.0.1:5000

--- Terminal 3: Speech2Text (náº¿u cáº§n) ---
cd "Speech2Text Services"
python app/web_ui.py
# Running on: http://127.0.0.1:5001

--- Terminal 4: Text2SQL (náº¿u cáº§n) ---
cd "Text2SQL Services"
python app.py
# Running on: http://127.0.0.1:5002

================================================================================
  6. QUAN TRá»ŒNG - VERSION DEPENDENCIES
================================================================================

*** SPEECH2TEXT SERVICE - PHáº¢I Cá» Äá»ŠNH VERSION ***
LÃ½ do: Incompatibility giá»¯a torch 2.5.1 vÃ  pyannote.audio

torch==2.0.1
torchaudio==2.0.2
pytorch-lightning==2.0.0
numpy<2.0 (tá»©c lÃ  numpy==1.26.4)

KHÃ”NG Ä‘Æ°á»£c dÃ¹ng:
- torch >= 2.1.0 (lá»—i torch.compiler)
- torchaudio >= 2.1.0 (lá»—i torchaudio.compliance.kaldi)
- pytorch-lightning >= 2.1.0 (lá»—i compatibility)
- numpy >= 2.0.0 (lá»—i dtype)

*** CHATBOT SERVICE ***
Flask==3.0.0
openai (latest - SDK v1.0+ vá»›i cÃº phÃ¡p má»›i)
google-generativeai==0.8.5

================================================================================
  7. THAY Äá»”I QUAN TRá»ŒNG SO Vá»šI TRÆ¯á»šC
================================================================================

--- Cáº¥u trÃºc thÆ° má»¥c ---
âœ… ÄÃ£ tá»• chá»©c theo Generative AI template
âœ… Hub Gateway cÃ³ config/, src/, examples/, notebooks/, docs/
âœ… Táº¥t cáº£ .md files Ä‘Ã£ chuyá»ƒn vÃ o docs/

--- Port Changes ---
âŒ CÅ©: Hub Gateway port 8080
âœ… Má»›i: Hub Gateway port 3000 (trÃ¡nh conflict vá»›i Kafka UI)

--- Environment Files ---
âŒ CÅ©: Má»—i service cÃ³ .env riÃªng, khÃ´ng Ä‘á»“ng bá»™
âœ… Má»›i: File .env master á»Ÿ root + file .env local cho ChatBot

--- API Models ---
âŒ CÅ©: gemini-pro (404 error), GPT-3.5-turbo
âœ… Má»›i: gemini-2.0-flash (FREE), GPT-4o-mini

--- OpenAI SDK ---
âŒ CÅ©: openai.ChatCompletion.create() (deprecated)
âœ… Má»›i: client.chat.completions.create() (v1.0+)

--- DeepSeek API ---
âŒ CÅ©: openai.api_base = "https://api.deepseek.com"
âœ… Má»›i: OpenAI(base_url="https://api.deepseek.com")

================================================================================
  8. TÃNH NÄ‚NG Má»šI - CHATBOT
================================================================================

âœ… Sidebar Chat History (gÃ³c trÃ¡i)
   - LÆ°u chat trong localStorage
   - Chuyá»ƒn Ä‘á»•i giá»¯a cÃ¡c chat
   - XÃ³a chat khÃ´ng cáº§n thiáº¿t

âœ… Gemini Auto-Generate Title
   - Tá»± Ä‘á»™ng táº¡o title 3-5 tá»« tiáº¿ng Viá»‡t
   - Trigger sau tin nháº¯n Ä‘áº§u tiÃªn
   - FREE (gemini-2.0-flash)

âœ… Copy Buttons
   - Copy tin nháº¯n AI (plain text)
   - Copy báº£ng (TSV format cho Excel)

âœ… Dark Mode
   - Toggle ğŸŒ™/â˜€ï¸
   - LÆ°u preference trong localStorage

âœ… Deep Thinking Mode
   - Checkbox "ğŸ§  Suy luáº­n sÃ¢u"
   - TÄƒng max_tokens 100%, giáº£m temperature 0.2

âœ… Download Chat
   - Export .txt vá»›i timestamp
   - Format Ä‘áº¹p, dá»… Ä‘á»c

âœ… File Upload
   - Support: .txt, .pdf, .doc, .docx, .json
   - AI Ä‘á»c vÃ  tráº£ lá»i dá»±a trÃªn ná»™i dung

âœ… Programming Mode
   - Context má»›i: "ğŸ’» Há»— trá»£ láº­p trÃ¬nh"
   - Tá»‘i Æ°u cho code generation

================================================================================
  9. API KEYS - LÆ¯U Ã
================================================================================

*** OpenAI API ***
- Model: gpt-4o-mini
- Cost: Input $0.15, Output $0.60 per 1M tokens
- Funded: $5 (Ä‘á»§ cho ~8M tokens input)

*** DeepSeek API ***
- Model: deepseek-chat
- Cost: Input $0.14, Output $0.28 per 1M tokens
- Funded: $5 (Ä‘á»§ cho ~35M tokens input)

*** Gemini API ***
- Model: gemini-2.0-flash
- Cost: FREE (60 requests/minute)
- 2 API keys Ä‘á»ƒ dá»± phÃ²ng

*** HuggingFace ***
- DÃ¹ng cho Speech2Text models
- Token miá»…n phÃ­ (Ä‘Äƒng kÃ½ táº¡i huggingface.co)

================================================================================
  10. TROUBLESHOOTING
================================================================================

--- Lá»—i: "ModuleNotFoundError: No module named 'torch'" ---
pip install torch==2.0.1 torchaudio==2.0.2

--- Lá»—i: "gemini-pro not found (404)" ---
âœ… ÄÃ£ fix: DÃ¹ng gemini-2.0-flash thay vÃ¬ gemini-pro

--- Lá»—i: "openai.error.InvalidRequestError" ---
âœ… ÄÃ£ fix: Cáº­p nháº­t SDK v1.0+ vá»›i cÃº phÃ¡p má»›i

--- Lá»—i: "torch.compiler not found" ---
âœ… ÄÃ£ fix: Downgrade torch==2.0.1

--- Lá»—i: "Cannot redeclare block-scoped variable" ---
âœ… ÄÃ£ fix: Di chuyá»ƒn DOM elements lÃªn Ä‘áº§u script

--- ChatBot khÃ´ng gá»­i Ä‘Æ°á»£c tin nháº¯n ---
1. Refresh browser (Ctrl+R)
2. Clear browser cache
3. Check console (F12) xem lá»—i gÃ¬
4. Restart Flask server

================================================================================
  11. TESTING
================================================================================

--- Test ChatBot ---
cd ChatBot
python test_gemini.py        # List available Gemini models
python test_tools.py          # Test Google Search & GitHub APIs

--- Test Hub Gateway ---
curl http://127.0.0.1:3000/health

--- Test Speech2Text ---
cd "Speech2Text Services"
python test_system.bat

================================================================================
  12. USEFUL COMMANDS
================================================================================

# Check Python version
python --version

# List installed packages
pip list

# Freeze current environment
pip freeze > requirements_backup.txt

# Install from backup
pip install -r requirements_backup.txt

# Git status
git status
git branch
git log --oneline -10

# Kill all Python processes (Windows)
taskkill /F /IM python.exe

================================================================================
  13. FILE STRUCTURE
================================================================================

AI assistant/
â”œâ”€â”€ .env                              # Master environment file
â”œâ”€â”€ Hub Gateway/
â”‚   â”œâ”€â”€ src/hub.py                   # Main hub (port 3000)
â”‚   â””â”€â”€ config/
â”œâ”€â”€ ChatBot/
â”‚   â”œâ”€â”€ app.py                       # Flask app (port 5000)
â”‚   â”œâ”€â”€ .env                         # ChatBot local env
â”‚   â”œâ”€â”€ templates/index.html         # UI with sidebar, dark mode
â”‚   â”œâ”€â”€ USAGE_GUIDE.md              # User guide
â”‚   â”œâ”€â”€ CHAT_HISTORY_FEATURE.md     # Technical docs
â”‚   â””â”€â”€ TOOLS_INTEGRATION_GUIDE.md  # API integration guide
â”œâ”€â”€ Speech2Text Services/
â”‚   â”œâ”€â”€ app/web_ui.py               # Speech2Text service (port 5001)
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ Text2SQL Services/
â”‚   â”œâ”€â”€ app.py                       # Text2SQL service (port 5002)
â”‚   â””â”€â”€ requirements.txt
â””â”€â”€ docs/                            # Documentation folder

================================================================================
  14. QUICK START (TL;DR)
================================================================================

# 1. Clone
git clone https://github.com/SkastVnT/AI-Assistant.git
cd AI-Assistant

# 2. Install (ChatBot only)
cd ChatBot
pip install Flask==3.0.0 openai google-generativeai==0.8.5

# 3. Create .env
# Copy tá»« section 4 bÃªn trÃªn, thay YOUR_KEY_HERE báº±ng API key tháº­t

# 4. Run
python app.py

# 5. Open
http://127.0.0.1:5000

DONE! ğŸ‰

================================================================================
  CONTACTS & SUPPORT
================================================================================

Repository: https://github.com/SkastVnT/AI-Assistant
Branch: ChatBotCoding (development) | master (stable)
Developer: Thanh Nguyen
Last Commit: feat: Add Chat History Sidebar with localStorage persistence

================================================================================
