================================================================================
                    T√ìM T·∫ÆT D·ª∞ √ÅN AI-ASSISTANT
                 N·ªÅn T·∫£ng T√≠ch H·ª£p ƒêa D·ªãch V·ª• AI
================================================================================

T√°c gi·∫£: SkastVnT, sug1omyo
Phi√™n b·∫£n: 2.0.0
Ng√†y: Th√°ng 11/2025
Repository: https://github.com/SkastVnT/AI-Assistant

================================================================================
1. T·ªîNG QUAN D·ª∞ √ÅN
================================================================================

1.1. Gi·ªõi thi·ªáu
----------------
AI-Assistant l√† n·ªÅn t·∫£ng t√≠ch h·ª£p 4 d·ªãch v·ª• AI ƒë·ªôc l·∫≠p, m·ªói service c√≥ th·ªÉ 
ch·∫°y ri√™ng ho·∫∑c k·∫øt h·ª£p v·ªõi nhau. D·ª± √°n ƒë∆∞·ª£c x√¢y d·ª±ng v·ªõi ki·∫øn tr√∫c modular, 
production-ready v√† h∆∞·ªõng t·ªõi c√°c ·ª©ng d·ª•ng th·ª±c t·∫ø.

C√°c d·ªãch v·ª• ch√≠nh:
- ChatBot AI (v2.0): Tr·ª£ l√Ω AI ƒëa m√¥ h√¨nh v·ªõi kh·∫£ nƒÉng t·∫°o ·∫£nh
- Text2SQL (v2.0): Chuy·ªÉn ƒë·ªïi ng√¥n ng·ªØ t·ª± nhi√™n sang SQL
- Speech2Text (v3.6): Nh·∫≠n d·∫°ng gi·ªçng n√≥i ti·∫øng Vi·ªát v·ªõi ph√¢n t√°ch ng∆∞·ªùi n√≥i
- Stable Diffusion: T·∫°o ·∫£nh t·ª´ text/image v·ªõi AI

1.2. M·ª•c ti√™u
-------------
- Cung c·∫•p n·ªÅn t·∫£ng AI ƒëa d·ª•ng cho c√° nh√¢n v√† doanh nghi·ªáp
- T√≠ch h·ª£p nhi·ªÅu m√¥ h√¨nh AI ti√™n ti·∫øn (Gemini, GPT-4, Whisper, Stable Diffusion)
- H·ªó tr·ª£ ti·∫øng Vi·ªát t·ªëi ∆∞u
- Mi·ªÖn ph√≠ v√† m√£ ngu·ªìn m·ªü (MIT License)
- Production-ready v·ªõi kh·∫£ nƒÉng deploy th·ª±c t·∫ø

1.3. C√¥ng ngh·ªá s·ª≠ d·ª•ng
----------------------
- Backend: Python 3.10+, Flask
- AI Models: 
  * Gemini 2.0 Flash (Google)
  * GPT-4 (OpenAI) 
  * Whisper & PhoWhisper (Speech Recognition)
  * Qwen (Local LLM)
  * Stable Diffusion (Image Generation)
- Database: ClickHouse, MongoDB, SQL Server, PostgreSQL, MySQL
- Audio Processing: pyannote.audio, faster-whisper
- Frontend: HTML5, CSS3, JavaScript (ES6 modules), Tailwind CSS
- Tools: Docker, Git

================================================================================
2. CHATBOT SERVICE (v2.0) - PORT 5001
================================================================================

2.1. T·ªïng quan
--------------
ChatBot AI l√† tr·ª£ l√Ω th√¥ng minh ƒëa m√¥ h√¨nh v·ªõi giao di·ªán t∆∞∆°ng t·ª± ChatGPT,
h·ªó tr·ª£ t·∫°o ·∫£nh t·ª´ text/image v√† ph√¢n t√≠ch file t·ª± ƒë·ªông.

2.2. T√≠nh nƒÉng ch√≠nh
--------------------

A. Multi-Model AI Support
- Google Gemini 2.0 Flash
- OpenAI GPT-4
- DeepSeek
- Qwen (Local LLM - ch·∫°y offline)
- BloomVN

B. Auto-File Analysis (NEW v2.0)
- Upload file v√† AI t·ª± ƒë·ªông ph√¢n t√≠ch kh√¥ng c·∫ßn g√µ c√¢u h·ªèi
- H·ªó tr·ª£: Code (.py, .js, .html, .css, .json)
- Documents (.pdf, .doc, .docx, .txt)
- Images (.jpg, .png, .gif, .webp)
- Gi·ªõi h·∫°n: 50MB/file
- T·ª± ƒë·ªông n√©n ·∫£nh xu·ªëng 1200px max

C. Stop Generation (NEW v2.0)
- D·ª´ng AI gi·ªØa ch·ª´ng khi ƒëang t·∫°o response
- Gi·ªØ l·∫°i n·ªôi dung ƒë√£ t·∫°o
- Button "‚èπÔ∏è D·ª´ng l·∫°i" trong loading indicator

D. Image Generation
- Text-to-Image: T·∫°o ·∫£nh t·ª´ prompt vƒÉn b·∫£n
- Image-to-Image: Ch·ªânh s·ª≠a/bi·∫øn ƒë·ªïi ·∫£nh c√≥ s·∫µn
- H·ªó tr·ª£ LoRA models (style transfer)
- H·ªó tr·ª£ VAE models (custom encoders)
- Tham s·ªë n√¢ng cao: Steps (20-50), CFG Scale (7-12), Samplers

E. AI Memory System
- L∆∞u tr·ªØ conversations v·ªõi ·∫£nh
- Message versioning (theo d√µi nhi·ªÅu phi√™n b·∫£n response)
- Session-based file management
- T√¨m ki·∫øm v√† t√°i s·ª≠ d·ª•ng conversation

F. Smart Storage Management (NEW v2.0)
- Progress bar hi·ªÉn th·ªã dung l∆∞·ª£ng (0-200MB)
- M√†u s·∫Øc: üíö Green (0-50%), üü° Yellow (50-80%), üî¥ Red (80-100%)
- Auto-cleanup gi·ªØ l·∫°i 5 conversations g·∫ßn nh·∫•t
- N√©n ·∫£nh t·ª± ƒë·ªông (quality 60%, max 800x800px)

G. Modern UX (NEW v2.0)
- Full-screen layout gi·ªëng ChatGPT (100vh)
- Message width 85% (tƒÉng t·ª´ 70%)
- Centered header v·ªõi GitHub badge
- Dark mode support
- Enhanced chat items v·ªõi icons (üí¨ ‚ú®)
- Fixed timestamp kh√¥ng c√≤n "jump" khi switch chat

H. Tools Integration
- Google Search
- GitHub Search
- Export to PDF (v·ªõi metadata v√† images)

2.3. Ki·∫øn tr√∫c k·ªπ thu·∫≠t
-----------------------

File Structure:
ChatBot/
‚îú‚îÄ‚îÄ app.py (1915 lines)           # Main Flask application
‚îú‚îÄ‚îÄ templates/index.html (509)    # UI template (modular)
‚îú‚îÄ‚îÄ static/
‚îÇ   ‚îú‚îÄ‚îÄ css/style.css (~2200)     # Styling
‚îÇ   ‚îî‚îÄ‚îÄ js/
‚îÇ       ‚îú‚îÄ‚îÄ main.js               # App controller
‚îÇ       ‚îî‚îÄ‚îÄ modules/              # ES6 Modules
‚îÇ           ‚îú‚îÄ‚îÄ chat-manager.js   # Session management
‚îÇ           ‚îú‚îÄ‚îÄ api-service.js    # API with AbortController
‚îÇ           ‚îú‚îÄ‚îÄ ui-utils.js       # UI utilities
‚îÇ           ‚îú‚îÄ‚îÄ message-renderer.js # Message + file rendering
‚îÇ           ‚îú‚îÄ‚îÄ file-handler.js   # File processing
‚îÇ           ‚îú‚îÄ‚îÄ memory-manager.js # Memory features
‚îÇ           ‚îú‚îÄ‚îÄ image-gen.js      # Image generation
‚îÇ           ‚îî‚îÄ‚îÄ export-handler.js # PDF export
‚îú‚îÄ‚îÄ src/utils/
‚îÇ   ‚îú‚îÄ‚îÄ local_model_loader.py     # Qwen model loader
‚îÇ   ‚îî‚îÄ‚îÄ sd_client.py              # Stable Diffusion client
‚îú‚îÄ‚îÄ Storage/Image_Gen/            # Generated images
‚îî‚îÄ‚îÄ data/memory/                  # Conversations

Ki·∫øn tr√∫c:
- MVC pattern v·ªõi Flask backend
- ES6 modular frontend architecture
- RESTful API design
- AbortController cho cancellation
- LocalStorage cho session management
- WebSocket-ready structure

API Endpoints:
- POST /chat: G·ª≠i tin nh·∫Øn
- POST /api/generate-image: Text2Image
- POST /api/img2img: Image transformation
- GET /api/sd-models: L·∫•y danh s√°ch models
- GET /history: L·∫•y l·ªãch s·ª≠ chat
- POST /clear: X√≥a conversation

2.4. C·∫£i ti·∫øn v2.0
------------------
1. Upload & Forget: Upload file ‚Üí Instant AI analysis
2. Stop When You Want: Click stop gi·ªØa response
3. Full-Screen Experience: Giao di·ªán full viewport
4. Smart Storage: Visual progress + auto cleanup
5. Message Versioning: Theo d√µi multiple response versions
6. Enhanced Visibility: Better chat items, centered header
7. Fixed Bugs: Timestamp kh√¥ng jump, file input clear properly

2.5. Y√™u c·∫ßu h·ªá th·ªëng
---------------------
- Python 3.10.6+
- RAM: 8GB (16GB recommended cho local models)
- GPU: NVIDIA with CUDA 11.8 (optional, for local Qwen)
- Storage: 20GB
- API Keys: OPENAI_API_KEY, GEMINI_API_KEY (optional: DEEPSEEK)
- Stable Diffusion running on port 7860 (cho image generation)

================================================================================
3. TEXT2SQL SERVICE (v2.0) - PORT 5002
================================================================================

3.1. T·ªïng quan
--------------
Text2SQL chuy·ªÉn ƒë·ªïi c√¢u h·ªèi ng√¥n ng·ªØ t·ª± nhi√™n (Ti·∫øng Vi·ªát/English) th√†nh 
SQL query ch√≠nh x√°c. H·ªó tr·ª£ nhi·ªÅu lo·∫°i database v√† c√≥ kh·∫£ nƒÉng t·ª± h·ªçc.

3.2. T√≠nh nƒÉng ch√≠nh
--------------------

A. Natural Language to SQL
- Hi·ªÉu c√¢u h·ªèi ti·∫øng Vi·ªát v√† ti·∫øng Anh
- T·∫°o SQL query ch√≠nh x√°c theo schema
- Deep Thinking Mode: Enhanced reasoning cho queries ph·ª©c t·∫°p

B. Multi-Database Support
- ClickHouse
- MongoDB
- SQL Server
- PostgreSQL
- MySQL
- T·ª± ƒë·ªông ƒëi·ªÅu ch·ªânh syntax theo t·ª´ng database

C. Schema Management
- Upload schema files (.txt, .sql, .json, .jsonl)
- Schema preview v·ªõi syntax highlighting
- Validate schema structure
- Support cho schema l·ªõn (multi-table)

D. Question Generation (NEW v2.0)
- AI t·ª± ƒë·ªông t·∫°o 5 c√¢u h·ªèi m·∫´u t·ª´ schema
- M·ªói c√¢u h·ªèi c√≥ SQL query t∆∞∆°ng ·ª©ng
- Gi√∫p kh√°m ph√° kh·∫£ nƒÉng c·ªßa database
- Keywords: "t·∫°o c√¢u h·ªèi", "g·ª£i √Ω", "generate questions", "v√≠ d·ª•"

E. AI Learning System (NEW v2.0)
- User cung c·∫•p SQL ƒë√∫ng ‚Üí AI l∆∞u v√†o Knowledge Base
- T√°i s·ª≠ d·ª•ng SQL ƒë√£ h·ªçc cho c√¢u h·ªèi t∆∞∆°ng t·ª±
- Learning keywords: "h·ªçc", "c√¢u sql ƒë√∫ng", "learn", "save"
- Format: JSON Lines trong knowledge_base/

F. Knowledge Base Management (NEW v2.0)
- Xem t·∫•t c·∫£ SQL ƒë√£ h·ªçc
- Button "üß† AI Learning" m·ªü modal
- Refresh v√† x√≥a entries
- Export knowledge base

G. Database Connection (NEW v2.0)
- K·∫øt n·ªëi tr·ª±c ti·∫øp ClickHouse (localhost & remote)
- K·∫øt n·ªëi MongoDB (localhost & Atlas)
- Test connection tr∆∞·ªõc khi save
- L∆∞u multiple connections
- Schema auto-fetch t·ª´ database

H. Export & History
- Download SQL query history
- Copy SQL to clipboard
- Syntax highlighting cho SQL output

3.3. Ki·∫øn tr√∫c k·ªπ thu·∫≠t
-----------------------

File Structure:
Text2SQL Services/
‚îú‚îÄ‚îÄ app_simple.py (789 lines)     # Main Flask app
‚îú‚îÄ‚îÄ templates/index_new.html      # Modern UI
‚îú‚îÄ‚îÄ static/
‚îÇ   ‚îú‚îÄ‚îÄ css/style.css             # Styles
‚îÇ   ‚îî‚îÄ‚îÄ js/app.js                 # Frontend logic
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ knowledge_base/           # AI learned SQL (JSON Lines)
‚îÇ   ‚îî‚îÄ‚îÄ connections/              # DB connection configs
‚îú‚îÄ‚îÄ sample_schemas/               # Example schemas
‚îÇ   ‚îú‚îÄ‚îÄ ecommerce_clickhouse.sql
‚îÇ   ‚îú‚îÄ‚îÄ mongodb_schema.json
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ uploads/                      # User uploaded schemas

API Endpoints:
- POST /upload: Upload schema file
- POST /chat: Generate SQL from question
- GET /schema: Get current schema
- GET /knowledge/list: List learned SQL
- POST /knowledge/save: Save SQL to KB
- POST /api/database/test-connection: Test DB connection
- POST /api/database/save-connection: Save DB config

Workflow:
1. User uploads schema ‚Üí Stored in session
2. User asks question ‚Üí Check Knowledge Base first
3. If found ‚Üí Return saved SQL
4. If not found ‚Üí Generate with Gemini
5. User provides correct SQL ‚Üí Save to KB
6. Future questions ‚Üí Reuse learned SQL

3.4. AI Learning Mechanism
---------------------------
Knowledge Base Format (JSONL):
{
  "question": "Top 10 kh√°ch h√†ng c√≥ doanh thu cao nh·∫•t",
  "sql": "SELECT user_id, SUM(order_amount) FROM orders GROUP BY user_id ORDER BY 2 DESC LIMIT 10",
  "learned_at": "2025-11-03T11:30:45"
}

Detection Logic:
- C√≥ SQL keywords: SELECT, INSERT, UPDATE, etc.
- C√≥ learning keywords: "h·ªçc", "c√¢u sql", "learn", "save"
- Extract SQL ‚Üí Find matching recent question ‚Üí Save to KB

3.5. Deployment
---------------
- Local: python app_simple.py (port 5002)
- Cloud: Render.com (FREE tier)
  * Build: pip install -r requirements.txt
  * Start: python app_simple.py
  * Env vars: GEMINI_API_KEY_1

3.6. Y√™u c·∫ßu h·ªá th·ªëng
---------------------
- Python 3.10+
- RAM: 4GB minimum
- API Keys: GEMINI_API_KEY_1 (required)
- Optional: Database servers (ClickHouse, MongoDB)

================================================================================
4. SPEECH2TEXT SERVICE (v3.6) - PORT 7860
================================================================================

4.1. T·ªïng quan
--------------
VistralS2T l√† h·ªá th·ªëng nh·∫≠n d·∫°ng gi·ªçng n√≥i ti·∫øng Vi·ªát v·ªõi ƒë·ªô ch√≠nh x√°c cao,
s·ª≠ d·ª•ng Dual-Model Fusion (Whisper + PhoWhisper) v√† AI enhancement.

4.2. T√≠nh nƒÉng ch√≠nh
--------------------

A. Dual-Model Fusion
- Whisper large-v3: ASR to√†n c·∫ßu (99 ng√¥n ng·ªØ) - 95% accuracy
- PhoWhisper-large: Chuy√™n ti·∫øng Vi·ªát (VinAI) - 98% accuracy
- Qwen2.5-1.5B: Smart fusion & enhancement - 97% accuracy
- K·∫øt h·ª£p 2 models ‚Üí ƒê·ªô ch√≠nh x√°c t·ªëi ∆∞u

B. Speaker Diarization
- pyannote.audio 3.1: 95-98% accuracy
- Ph√°t hi·ªán 2-5 speakers t·ª± ƒë·ªông
- Timeline segmentation
- 3-role labeling: H·ªá th·ªëng/Nh√¢n vi√™n/Kh√°ch h√†ng

C. Vietnamese Optimization
- Fine-tuned cho phonetics ti·∫øng Vi·ªát
- Grammar & punctuation refinement
- X·ª≠ l√Ω gi·ªçng mi·ªÅn (B·∫Øc, Trung, Nam)
- Vocabulary optimization

D. Voice Activity Detection (VAD)
- Smart VAD ƒë·ªÉ lo·∫°i b·ªè silence
- Faster processing
- Reduced model load

E. AI Text Enhancement
- Qwen2.5-1.5B-Instruct LLM
- Smart punctuation
- Grammar correction
- Capitalization
- Sentence structure optimization

F. Web UI (NEW v3.6)
- Drag & drop audio upload
- Real-time progress tracking qua WebSocket
- Session management v·ªõi history
- Live transcript preview
- One-click download (TXT, JSON)
- Processing stages visualization

G. Multi-Format Support
- Input: MP3, WAV, M4A, FLAC
- Output: TXT (timeline), JSON (metadata), Timeline format
- Auto-convert to 16kHz WAV

4.3. Ki·∫øn tr√∫c k·ªπ thu·∫≠t
-----------------------

File Structure:
Speech2Text Services/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ docker/                   # Docker setup
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ docker-compose.yml
‚îÇ   ‚îî‚îÄ‚îÄ web_ui.py                 # Flask Web UI
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ whisper_model.py      # Whisper wrapper
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ phowhisper_model.py   # PhoWhisper wrapper
‚îÇ   ‚îú‚îÄ‚îÄ processors/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ audio_processor.py    # Audio preprocessing
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ diarization.py        # Speaker separation
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îî‚îÄ‚îÄ file_utils.py         # File operations
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ fix_dependencies.bat      # Step-by-step installer
‚îÇ   ‚îî‚îÄ‚îÄ install_ffmpeg.bat        # FFmpeg setup
‚îú‚îÄ‚îÄ data/audio/                   # Uploaded files
‚îú‚îÄ‚îÄ results/                      # Transcriptions
‚îî‚îÄ‚îÄ requirements-stepX.txt        # Dependency files (4 steps)

Processing Pipeline (6 stages):
1. Audio Preprocessing (10-15%)
   - Convert to 16kHz WAV
   - Noise reduction
   - Volume normalization

2. Speaker Diarization (20-40%)
   - Detect speakers
   - Create timeline segments
   - Label speakers

3. Whisper Transcription (55-75%)
   - Process each segment
   - Global ASR
   - High accuracy

4. PhoWhisper Transcription (78-88%)
   - Vietnamese specialist
   - Phonetics optimization
   - Parallel processing

5. Qwen Enhancement (92-98%)
   - Fuse 2 transcripts
   - Smart punctuation
   - Grammar refinement
   - Role labeling

6. Results Ready (100%)
   - Timeline output
   - Speaker-separated text
   - JSON metadata

4.4. Installation Process
--------------------------
Dependencies resolved qua 4 b∆∞·ªõc:
1. requirements-step1.txt: PyTorch foundation
2. requirements-step2.txt: AI models (transformers, pyannote)
3. requirements-step3.txt: Audio processing (faster-whisper)
4. requirements-step4.txt: Web UI (Flask, SocketIO)

Script: .\scripts\fix_dependencies.bat

4.5. Fixes Applied (v3.6)
--------------------------
‚úÖ Dependency resolution error (resolution-too-deep)
‚úÖ Accelerate package error (removed device_map)
‚úÖ TorchCodec warnings (suppressed, fallback working)
‚úÖ HuggingFace token configuration (.env)
‚ö†Ô∏è Diarization requires HF license acceptance (1 click)

4.6. Performance
----------------
- Speed: ~1x real-time (1 ph√∫t audio = 1 ph√∫t x·ª≠ l√Ω)
- Accuracy: 98%+ cho ti·∫øng Vi·ªát
- Diarization: 95-98% accuracy
- CPU Support: Works without GPU
- GPU Acceleration: 3-4x faster v·ªõi NVIDIA GPU

4.7. Y√™u c·∫ßu h·ªá th·ªëng
---------------------
- Python: 3.10.6+ (managed by pyenv)
- RAM: 8GB minimum (16GB recommended)
- Storage: 15GB (models + cache)
- GPU: Optional (NVIDIA 6GB+ VRAM for speedup)
- HuggingFace Token: Required cho diarization

================================================================================
5. STABLE DIFFUSION WEBUI - PORT 7861
================================================================================

5.1. T·ªïng quan
--------------
Stable Diffusion WebUI (AUTOMATIC1111) ƒë∆∞·ª£c t√≠ch h·ª£p v√†o AI-Assistant
ƒë·ªÉ cung c·∫•p kh·∫£ nƒÉng t·∫°o ·∫£nh AI t·ª´ text ho·∫∑c bi·∫øn ƒë·ªïi ·∫£nh c√≥ s·∫µn.

5.2. T√≠nh nƒÉng
--------------
A. Generation Modes
- Text-to-Image (txt2img): T·∫°o ·∫£nh t·ª´ prompt
- Image-to-Image (img2img): Bi·∫øn ƒë·ªïi ·∫£nh
- Inpainting: S·ª≠a m·ªôt ph·∫ßn ·∫£nh
- Outpainting: M·ªü r·ªông ·∫£nh

B. Advanced Features
- LoRA Models: Style transfer
- VAE Support: Custom encoders/decoders
- ControlNet: Guided generation
- Textual Inversion: Custom embeddings
- Hypernetworks: Style modifications

C. Integration
- RESTful API enabled (--api flag)
- ChatBot integration qua SD API
- CUDA 12.1 optimized
- xformers support cho memory efficiency

5.3. Ki·∫øn tr√∫c
--------------
Based on: AUTOMATIC1111/stable-diffusion-webui
Custom setup:
- webui.bat: Launch script v·ªõi --api
- config.json: Custom configurations
- models/: Stable Diffusion checkpoints
- extensions/: Community extensions
- embeddings/: Textual inversions

API Integration:
ChatBot ‚Üí HTTP Request ‚Üí SD WebUI API ‚Üí Response ‚Üí Display

5.4. Parameters
---------------
- Steps: 20-50 (higher = better quality)
- CFG Scale: 7-12 (prompt adherence)
- Sampler: Euler, DPM++, DDIM, etc.
- Resolution: 512x512, 768x768, 1024x1024
- Batch: Generate multiple images
- Seed: Reproducible results

5.5. Y√™u c·∫ßu h·ªá th·ªëng
---------------------
- Python 3.10.6
- NVIDIA GPU: RTX 3060+ (6GB+ VRAM recommended)
- CUDA 12.1
- Storage: 10GB+ (models)
- RAM: 8GB+

================================================================================
6. KI·∫æN TR√öC T·ªîNG TH·ªÇ
================================================================================

6.1. System Architecture
------------------------
```
AI-Assistant Platform
‚îÇ
‚îú‚îÄ‚îÄ ChatBot Service (Port 5001)
‚îÇ   ‚îú‚îÄ‚îÄ Multi-Model AI (Gemini, GPT-4, Qwen)
‚îÇ   ‚îú‚îÄ‚îÄ File Analysis
‚îÇ   ‚îú‚îÄ‚îÄ Image Generation Integration
‚îÇ   ‚îî‚îÄ‚îÄ Memory System
‚îÇ
‚îú‚îÄ‚îÄ Text2SQL Service (Port 5002)
‚îÇ   ‚îú‚îÄ‚îÄ NL to SQL Conversion
‚îÇ   ‚îú‚îÄ‚îÄ Question Generation
‚îÇ   ‚îú‚îÄ‚îÄ AI Learning
‚îÇ   ‚îî‚îÄ‚îÄ Database Connection
‚îÇ
‚îú‚îÄ‚îÄ Speech2Text Service (Port 7860)
‚îÇ   ‚îú‚îÄ‚îÄ Dual-Model ASR
‚îÇ   ‚îú‚îÄ‚îÄ Speaker Diarization
‚îÇ   ‚îú‚îÄ‚îÄ Vietnamese Optimization
‚îÇ   ‚îî‚îÄ‚îÄ Web UI
‚îÇ
‚îî‚îÄ‚îÄ Stable Diffusion WebUI (Port 7861)
    ‚îú‚îÄ‚îÄ Text-to-Image
    ‚îú‚îÄ‚îÄ Image-to-Image
    ‚îú‚îÄ‚îÄ LoRA & VAE
    ‚îî‚îÄ‚îÄ API Server
```

6.2. Technology Stack
---------------------
Backend:
- Python 3.10+
- Flask 3.0
- PyTorch 2.0+
- Transformers 4.40

AI Models:
- Gemini 2.0 Flash (Google)
- GPT-4 (OpenAI)
- Whisper large-v3 (OpenAI)
- PhoWhisper-large (VinAI)
- Qwen2.5-1.5B (Alibaba)
- Stable Diffusion 1.5/XL

Frontend:
- HTML5/CSS3
- JavaScript ES6 Modules
- Tailwind CSS
- WebSocket (real-time updates)

Storage:
- LocalStorage (sessions)
- File System (conversations, images)
- JSON/JSONL (knowledge base)

6.3. Design Patterns
--------------------
- MVC (Model-View-Controller)
- RESTful API design
- Modular architecture
- Service-oriented architecture (SOA)
- Event-driven (WebSocket)
- Singleton pattern (model loaders)
- Factory pattern (LLM clients)

6.4. Security
-------------
- API Key management qua .env
- CORS configuration
- Input validation
- File upload restrictions
- Session management
- Error handling & logging

================================================================================
7. C√ÄI ƒê·∫∂T & TRI·ªÇN KHAI
================================================================================

7.1. Quick Start
----------------
Prerequisites:
- Python 3.10+
- Git
- NVIDIA GPU (optional, recommended)
- API Keys (Gemini/OpenAI)

Clone Repository:
```
git clone https://github.com/SkastVnT/AI-Assistant.git
cd AI-Assistant
```

Option 1: Start ChatBot
```
cd ChatBot
python -m venv venv_chatbot
.\venv_chatbot\Scripts\activate
pip install -r requirements.txt
# Configure .env
python app.py
# ‚Üí http://localhost:5001
```

Option 2: Start Text2SQL
```
cd "Text2SQL Services"
python -m venv Text2SQL
.\Text2SQL\Scripts\activate
pip install -r requirements.txt
# Configure .env with GEMINI_API_KEY_1
python app_simple.py
# ‚Üí http://localhost:5002
```

Option 3: Start Speech2Text
```
cd "Speech2Text Services"
.\scripts\fix_dependencies.bat
# Configure .env with HF_TOKEN
.\start_webui.bat
# ‚Üí http://localhost:7860
```

Option 4: Start Stable Diffusion
```
cd stable-diffusion-webui
.\webui.bat
# ‚Üí http://localhost:7861
```

7.2. Environment Variables
---------------------------
Root .env:
```
OPENAI_API_KEY=sk-...
GEMINI_API_KEY_1=...
GEMINI_API_KEY_2=...
DEEPSEEK_API_KEY=...
GOOGLE_SEARCH_API_KEY_1=...
GITHUB_TOKEN=...
```

ChatBot/.env:
```
OPENAI_API_KEY=sk-...
GEMINI_API_KEY=...
SD_API_URL=http://127.0.0.1:7860
FLASK_PORT=5001
```

Text2SQL Services/.env:
```
GEMINI_API_KEY_1=...
PORT=5002
```

Speech2Text Services/.env:
```
HF_TOKEN=hf_...
```

7.3. Dependencies Management
-----------------------------
ChatBot:
- Flask, openai, google-generativeai
- torch, transformers (local models)
- Pillow, requests

Text2SQL:
- Flask, flask-cors
- google-generativeai
- pymongo, clickhouse-driver (database clients)

Speech2Text:
- Flask, flask-socketio
- torch, transformers, accelerate
- faster-whisper, pyannote.audio
- librosa, soundfile

7.4. Production Deployment
---------------------------
Deployment Options:
1. Local Server (Windows/Linux)
2. Cloud VPS (AWS, GCP, DigitalOcean)
3. PaaS (Render.com, Heroku)
4. Docker Container (future)

Text2SQL on Render.com (FREE):
1. Push to GitHub
2. Create Web Service on Render
3. Build: pip install -r requirements.txt
4. Start: python app_simple.py
5. Add env var: GEMINI_API_KEY_1
6. Deploy!

================================================================================
8. TESTING & QUALITY ASSURANCE
================================================================================

8.1. Testing Strategy
---------------------
Manual Testing:
- Functional testing cho t·ª´ng service
- Integration testing (ChatBot + SD)
- UI/UX testing
- Performance testing

Automated Testing (Planned):
- Unit tests (pytest)
- API endpoint tests
- Model output validation
- Load testing

8.2. Test Cases
---------------
ChatBot:
‚úì Multi-model switching
‚úì File upload & analysis
‚úì Stop generation
‚úì Image generation (txt2img, img2img)
‚úì Memory save/load
‚úì Storage cleanup
‚úì PDF export

Text2SQL:
‚úì Schema upload
‚úì Question generation
‚úì SQL generation accuracy
‚úì AI learning mechanism
‚úì Knowledge base management
‚úì Database connection
‚úì Multi-database support

Speech2Text:
‚úì Audio upload (multiple formats)
‚úì Whisper transcription
‚úì PhoWhisper transcription
‚úì Qwen enhancement
‚úì Speaker diarization (with HF license)
‚úì WebSocket real-time updates
‚úì Results download

8.3. Known Issues & Fixes
--------------------------
ChatBot:
‚úì FIXED: Timestamp animation bug
‚úì FIXED: File input not clearing
‚úì FIXED: Storage display inaccuracy
‚úì FIXED: Chat items jumping

Text2SQL:
‚úì WORKING: Question generation
‚úì WORKING: AI learning
‚úì WORKING: Database connections

Speech2Text:
‚úì FIXED: Dependency resolution error
‚úì FIXED: Accelerate error (device_map)
‚úì FIXED: TorchCodec warnings
‚ö†Ô∏è PENDING: Diarization license (user action required)

================================================================================
9. USE CASES & APPLICATIONS
================================================================================

9.1. Business Applications
---------------------------
ChatBot:
- Customer support automation
- Internal knowledge base assistant
- Code review & debugging helper
- Content creation with AI images

Text2SQL:
- Business Intelligence dashboards
- Database query automation
- Non-technical data access
- Analytics without SQL knowledge

Speech2Text:
- Meeting transcription
- Call center analytics
- Interview documentation
- Podcast processing (Vietnamese)

9.2. Education & Research
--------------------------
ChatBot:
- Programming tutor
- Study assistant
- Research paper summarization

Text2SQL:
- Database learning tool
- SQL query generation practice
- Schema exploration

Speech2Text:
- Lecture transcription
- Research interview processing
- Vietnamese language studies

9.3. Personal Use
-----------------
ChatBot:
- Personal AI assistant
- Document analysis
- Creative content generation
- Psychological counseling bot

Text2SQL:
- Personal database management
- Data exploration

Speech2Text:
- Voice memo transcription
- Audio file organization

================================================================================
10. PH√ÅT TRI·ªÇN & ROADMAP
================================================================================

10.1. Version History
---------------------
ChatBot:
- v1.0.0 (June 2024): Initial release
- v1.5.0 (Aug 2024): Local models + Memory
- v1.8.0 (Oct 2024): img2img + LoRA/VAE
- v2.0.0 (Nov 2025): Auto-file analysis + Stop generation + Full UX overhaul

Text2SQL:
- v1.0.0: Basic NL to SQL
- v2.0.0 (Nov 2025): Question generation + AI Learning + DB connections

Speech2Text:
- v3.0.0: Dual-model fusion
- v3.6.0 (Oct 2025): Web UI + Dependency fixes + Qwen enhancement

10.2. Planned Features
----------------------
ChatBot v2.1.0:
- [ ] Message version browsing UI
- [ ] Drag & drop file upload
- [ ] File preview modal
- [ ] Batch file operations
- [ ] Conversation search

ChatBot v2.5.0:
- [ ] Voice input/output
- [ ] Real-time collaboration
- [ ] Cloud sync
- [ ] Mobile app (PWA)

ChatBot v3.0.0:
- [ ] TypeScript migration
- [ ] Unit test coverage
- [ ] E2E testing
- [ ] Performance profiling
- [ ] WCAG 2.1 AA accessibility

Text2SQL Future:
- [ ] More databases (Oracle, Redis)
- [ ] Visual query builder
- [ ] Query optimization suggestions
- [ ] Multi-tenant support

Speech2Text Future:
- [ ] Real-time streaming transcription
- [ ] More languages
- [ ] Custom vocabulary
- [ ] Cloud deployment

Platform-wide:
- [ ] Docker Compose setup
- [ ] Kubernetes deployment
- [ ] API Gateway (unified API)
- [ ] User authentication
- [ ] Usage analytics
- [ ] Admin dashboard

10.3. Technical Debt
--------------------
- Add comprehensive unit tests
- Implement CI/CD pipeline
- Add monitoring & logging (ELK stack)
- Database migration (t·ª´ file system)
- API rate limiting
- Caching layer (Redis)
- TypeScript for type safety

================================================================================
11. T√ÄI LI·ªÜU THAM KH·∫¢O
================================================================================

11.1. T√†i li·ªáu d·ª± √°n
--------------------
- README.md: T·ªïng quan d·ª± √°n
- ChatBot/README.md: ChatBot documentation
- Text2SQL Services/README.md: Text2SQL guide
- Speech2Text Services/README.md: Speech2Text setup
- docs/PROJECT_STRUCTURE.md: Ki·∫øn tr√∫c chi ti·∫øt
- docs/GETTING_STARTED.md: H∆∞·ªõng d·∫´n b·∫Øt ƒë·∫ßu

11.2. API Documentation
-----------------------
- ChatBot/CHANGELOG.md: Version history
- Text2SQL Services/AI_LEARNING_GUIDE.md: AI Learning features
- Speech2Text Services/WEBUI_SETUP_COMPLETE.md: Setup guide

11.3. External Resources
------------------------
Models:
- Google Gemini: https://ai.google.dev
- OpenAI GPT-4: https://platform.openai.com
- Whisper: https://github.com/openai/whisper
- PhoWhisper: https://huggingface.co/vinai/PhoWhisper
- Qwen: https://huggingface.co/Qwen
- Stable Diffusion: https://github.com/AUTOMATIC1111/stable-diffusion-webui

Technologies:
- Flask: https://flask.palletsprojects.com
- PyTorch: https://pytorch.org
- Transformers: https://huggingface.co/docs/transformers
- pyannote.audio: https://github.com/pyannote/pyannote-audio

================================================================================
12. K·∫æT LU·∫¨N
================================================================================

12.1. Th√†nh t·ª±u
---------------
AI-Assistant l√† n·ªÅn t·∫£ng t√≠ch h·ª£p ƒëa d·ªãch v·ª• AI ho√†n ch·ªânh v·ªõi:
‚úÖ 4 services production-ready
‚úÖ Multi-model AI support
‚úÖ Vietnamese optimization
‚úÖ Modern UX/UI
‚úÖ Open source (MIT License)
‚úÖ Active development
‚úÖ 2+ contributors
‚úÖ 2 stars on GitHub (milestone ƒë·∫ßu ti√™n)

12.2. ƒêi·ªÉm m·∫°nh
---------------
1. Ki·∫øn tr√∫c modular - M·ªói service ƒë·ªôc l·∫≠p
2. Multi-model support - Linh ho·∫°t ch·ªçn AI model
3. Vietnamese optimization - T·ªëi ∆∞u cho ti·∫øng Vi·ªát
4. Production-ready - C√≥ th·ªÉ deploy th·ª±c t·∫ø
5. Free & Open Source - MIT License
6. Comprehensive documentation - T√†i li·ªáu ƒë·∫ßy ƒë·ªß
7. Active maintenance - C·∫≠p nh·∫≠t th∆∞·ªùng xuy√™n

12.3. ·ª®ng d·ª•ng th·ª±c t·∫ø
----------------------
- Business: BI, automation, analytics
- Education: Learning tools, transcription
- Personal: AI assistant, content creation
- Creative: Image generation, content design

12.4. T∆∞∆°ng lai
---------------
D·ª± √°n h∆∞·ªõng t·ªõi:
- 10+ stars: Release v2.1 with new features
- 50+ stars: Docker support & easy deployment
- 100+ stars: Cloud-ready v·ªõi auth & multi-tenant
- Enterprise adoption
- Community contributions
- Mobile app development

================================================================================
TH√îNG TIN LI√äN H·ªÜ
================================================================================

Repository: https://github.com/SkastVnT/AI-Assistant
Author: SkastVnT (Solo Developer ‚Ä¢ AI Enthusiast ‚Ä¢ Full-Stack Engineer)
Contributor: sug1omyo (Fresher Software Engineer)
License: MIT License
Version: 2.0.0
Last Updated: November 4, 2025

‚≠ê Star this repo if you find it helpful!

================================================================================
PH·ª§ L·ª§C: C√ÅC S·ªê LI·ªÜU QUAN TR·ªåNG
================================================================================

Lines of Code:
- ChatBot/app.py: 1915 lines
- ChatBot/static/css/style.css: ~2200 lines
- ChatBot/templates/index.html: 509 lines
- Text2SQL Services/app_simple.py: 789 lines
- Total: ~10,000+ lines Python + HTML/CSS/JS

Models Used:
- Gemini 2.0 Flash: PRIMARY (Google)
- GPT-4: Premium option (OpenAI)
- Whisper large-v3: Speech recognition (OpenAI)
- PhoWhisper-large: Vietnamese ASR (VinAI)
- Qwen2.5-1.5B-Instruct: Local LLM + Enhancement (Alibaba)
- Stable Diffusion 1.5/XL: Image generation
- pyannote.audio 3.1: Speaker diarization

Performance Metrics:
- ChatBot response time: 2-5s (Gemini), 3-8s (GPT-4)
- Text2SQL accuracy: 90%+ for simple queries
- Speech2Text accuracy: 98%+ Vietnamese
- Image generation: 20-60s depending on steps

System Requirements:
- Minimum RAM: 4-8GB
- Recommended RAM: 16GB
- GPU: Optional but recommended (NVIDIA 6GB+ VRAM)
- Storage: 20-50GB (v·ªõi models)
- Python: 3.10+

Deployment Ports:
- ChatBot: 5001
- Text2SQL: 5002
- Speech2Text: 7860
- Stable Diffusion: 7861

================================================================================
K·∫æT TH√öC T√ìM T·∫ÆT D·ª∞ √ÅN
================================================================================

T√†i li·ªáu n√†y cung c·∫•p t·ªïng quan ƒë·∫ßy ƒë·ªß v·ªÅ d·ª± √°n AI-Assistant, bao g·ªìm:
- T·ªïng quan 4 services
- Ki·∫øn tr√∫c k·ªπ thu·∫≠t chi ti·∫øt
- T√≠nh nƒÉng v√† use cases
- H∆∞·ªõng d·∫´n c√†i ƒë·∫∑t & deployment
- Roadmap ph√°t tri·ªÉn
- T√†i li·ªáu tham kh·∫£o

S·ª≠ d·ª•ng t√†i li·ªáu n√†y l√†m c∆° s·ªü ƒë·ªÉ vi·∫øt b√°o c√°o chi ti·∫øt h∆°n.

Generated: November 4, 2025
By: GitHub Copilot for SkastVnT
